- name: install suckless dependencies
  block:
  - include_role:
      name: update 
  - include_role:
      name: base-devel
  - include_role:
      name: suckless

  - name: Install dragon dependencies 
    become: true
    apt:
      name:
        - libgtk-3-dev
  tags:
    - install
    - suckless
    - st
    - dmenu
    - dwm
    - dragon

- name: Clone suckless programs
  block:
    - name: Create programs folder
      shell: "mkdir -p {{ suckless_home }}"

    - name: Clone suckless programs
      git:
        repo: 'https://github.com/aldevv/suckless'
        dest: "{{ suckless_home }}"
        recursive: true
        depth: 1
  tags:
    - install
    - suckless
    - st
    - dmenu
    - dwm
    - dragon

- name: Build all suckless programs
  become: true
  shell: "make clean && make && make install"
  args:
    chdir: "{{ suckless_home }}/{{ item }}"
  loop:
    - "st"
    - "dmenu"
    - "dwm"
    - "dragon"
  tags:
    - install
    - suckless
    - st
    - dmenu
    - dwm
    - dragon
